# -*- coding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
STOP_RENDERING = runtime.STOP_RENDERING
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 10
_modified_time = 1555123689.382
_enable_loop = True
_template_filename = 'D:/py-workspace/LanhuSaas/framework/templates/scene/scenecarousel.html'
_template_uri = './scene/scenecarousel.html'
_source_encoding = 'utf-8'
_exports = []


def render_body(context,**pageargs):
    __M_caller = context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        STATIC_URL = context.get('STATIC_URL', UNDEFINED)
        SITE_URL = context.get('SITE_URL', UNDEFINED)
        __M_writer = context.writer()
        __M_writer(u'<!DOCTYPE html>\r\n<head>\r\n    <meta charset="UTF-8">\r\n    <title>Title</title>\r\n    <script src="https://magicbox.bk.tencent.com/static_api/v3/assets/js/jquery-1.10.2.min.js"></script>\r\n    <script type="text/javascript" src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'js/dataflow/dataflow2.0.js"></script>\r\n    <script type="text/javascript" src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'js/Component-based.js"></script>\r\n    <script src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"></script>\r\n    <!-- \u5f00\u53d1\u73af\u5883\u7248\u672c\uff0c\u5305\u542b\u4e86\u6709\u5e2e\u52a9\u7684\u547d\u4ee4\u884c\u8b66\u544a--2.5.51 ')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/-->\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/vue-2.5.21/vue.development.js"></script>\r\n    <!-- \u751f\u4ea7\u73af\u5883\u7248\u672c\uff0c\u4f18\u5316\u4e86\u5c3a\u5bf8\u548c\u901f\u5ea6 \u529f\u80fd\u5b8c\u5584\u540e\u8bf7\u5c06vue.development.js\u8be5\u4e3avue.js-->\r\n    <!--<script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/vue-2.5.21/vue.js"></script>-->\r\n    <!-- element UI\u5f15\u5165\u6837\u5f0f -->\r\n    <link href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/element-2.4.11/index.css" rel="stylesheet">\r\n    <!-- element UI\u5f15\u5165\u7ec4\u4ef6\u5e93 -->\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/element-2.4.11/index.js"></script>\r\n    <!-- vue\u7684ajax\u4f9d\u8d56-->\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/vue-2.5.21/axios.min.js"></script>\r\n    <!--jQuery\u5e93\u4f7f\u7528\u65f6\u8bf7\u4f7f\u7528\u6807\u51c6jQuery\u8bed\u6cd5-->\r\n    <!--<script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/jquery/jquery-3.1.1.min.js"></script>-->\r\n    <!--\u9875\u9762\u521d\u59cb\u5316css(Tencent)-->\r\n    <link href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'css/common/init.css" rel="stylesheet">\r\n    <!--\u672c\u9875\u9762css-->\r\n    <link href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'css/common/main.css" rel="stylesheet">\r\n    <!--\u963f\u91cc\u5df4\u5df4\u77e2\u91cf\u56fe\u6807\u5e93--\u9879\u76ee\u5b8c\u6210\u540e\u8bf7\u4e0b\u8f7dcss\u5e76\u4e0b\u8f7dcss\u5f15\u7528\u7684\u5b57\u4f53\u6587\u4ef6-->\r\n    <link href="http://at.alicdn.com/t/font_997278_ptr5bdmor4j.css" rel="stylesheet">\r\n\r\n    <!--\u4ee5\u4e0b\u4e3a\u540e\u53f0\u53c2\u6570-->\r\n    <!--\r\n    "')
        __M_writer(unicode(SITE_URL))
        __M_writer(u'";\t        // app\u7684url\u524d\u7f00,\u5728ajax\u8c03\u7528\u7684\u65f6\u5019\uff0c\u5e94\u8be5\u52a0\u4e0a\u8be5\u524d\u7f00\r\n    "')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'";       // \u9759\u6001\u8d44\u6e90\u524d\u7f00\r\n    **/--->\r\n\r\n    <link type="text/css" href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'css/monitorScene/style.css" rel="stylesheet">\r\n    <script src="https://cdn.jsdelivr.net/npm/v-charts/lib/index.min.js"></script>\r\n    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/v-charts/lib/style.min.css">\r\n    <link href="https://magicbox.bk.tencent.com/static_api/v3/bk/css/bk.css" rel="stylesheet">\r\n    <link href="https://magicbox.bk.tencent.com/static_api/v3/assets/jrange/css/jquery.range.css" rel="stylesheet">\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'js/jquery.range-min.js"></script>\r\n\r\n\r\n    <link rel="stylesheet" href="https://magicbox.bk.tencent.com/static_api/v3/assets/bk-icon-2.0/iconfont.css">\r\n    <script type="text/javascript"\r\n            src="https://magicbox.bk.tencent.com/static_api/v3/assets/dataflow-2.0/js/jsplumb.min.js"></script>\r\n    <link rel="stylesheet"\r\n          href="https://magicbox.bk.tencent.com/static_api/v3/assets/dataflow-2.0/css/jsPlumbToolkit-defaults.css"/>\r\n    <link rel="stylesheet" href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'css/monitorScene/dataflow-index.css">\r\n</head>\r\n<body>\r\n<div id="main">\r\n    <template>\r\n        <div class="block">\r\n            <!--<span class="demonstration">Click \u6307\u793a\u5668\u89e6\u53d1</span>-->\r\n\r\n            <el-carousel trigger="click" @change="scene_change" :height="imgHeight">\r\n                <el-carousel-item v-for="(item,index) in imgList" :key="index">\r\n                    <el-row>\r\n                        <el-col :span="24">\r\n                            <div ref="imgHeight" :src="item.idView" :id="item.scene_id" :class="\'scene_content\'+index"\r\n                                 style="position: relative;">\r\n\r\n                            </div>\r\n                        </el-col>\r\n                    </el-row>\r\n                </el-carousel-item>\r\n            </el-carousel>\r\n        </div>\r\n    </template>\r\n</div>\r\n\r\n<script>\r\n    axios.interceptors.request.use((config) => {\r\n        config.headers[\'X-Requested-With\'] = \'XMLHttpRequest\';\r\n        let regex = /.*csrftoken=([^;.]*).*$/; // \u7528\u4e8e\u4ececookie\u4e2d\u5339\u914d csrftoken\u503c\r\n        config.headers[\'X-CSRFToken\'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\r\n        return config\r\n    });\r\n    let vm = new Vue({\r\n        el: "#main",\r\n        data: {\r\n            imgList: [],\r\n            imgHeight: \'\' + document.documentElement.clientHeight + \'px\',\r\n        },\r\n        methods: {\r\n            async get_scenes() {\r\n                let res = await axios({\r\n                    method: \'post\',\r\n                    url: \'')
        __M_writer(unicode(SITE_URL))
        __M_writer(u'monitor_scene/alternate_play/\',\r\n                }).catch(function (e) {\r\n                    vm.$message.error(\'\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff01\');\r\n                });\r\n                vm.imgList = res.data.message;   //\u83b7\u53d6\u573a\u666f\r\n            },\r\n            //\u8f6e\u64ad\u5207\u6362\u65f6\u89e6\u53d1\uff0c\u591a\u4e2a\u573a\u666f\u65f6\u624d\u4f1a\u5207\u6362\u65f6\u89e6\u53d1\uff0c\u5355\u4e2a\u573a\u666f\u53ea\u6267\u884c\u4e00\u6b21\r\n            scene_change(value1, value2) {\r\n                if (vm.imgList.length==1){    //\u53ea\u6709\u4e00\u4e2a\u573a\u666f\r\n                    vm.scene_content_change(0);\r\n                    setInterval(function () {\r\n                        vm.scene_content_change(0);   //\u5341\u79d2\u949f\u66f4\u65b0\u4e00\u6b21dom\r\n                    },10000)\r\n                }\r\n                if (vm.imgList.length>1) {  //\u591a\u4e8e\u4e00\u4e2a\u573a\u666f\r\n                    vm.scene_content_change(value1);\r\n                }\r\n\r\n            },\r\n            //\u66f4\u65b0dom\r\n            scene_content_change(value) {\r\n                let selector = \'.scene_content\' + value;\r\n                let base_list = vm.imgList[value].scene_content[0].base_list;  //\u83b7\u53d6\u5f53\u524d\u573a\u666f\u7684\u57fa\u672c\u76d1\u63a7\u9879\u6570\u636e\r\n                let chart_list = vm.imgList[value].scene_content[0].chart_list;  //\u83b7\u53d6\u5f53\u524d\u573a\u666f\u7684\u56fe\u6807\u76d1\u63a7\u9879\u6570\u636e\r\n                let job_list = vm.imgList[value].scene_content[0].job_list;  //\u83b7\u53d6\u5f53\u524d\u573a\u666f\u7684\u4f5c\u4e1a\u76d1\u63a7\u9879\u6570\u636e\r\n                let flow_list = vm.imgList[value].scene_content[0].flow_list;  //\u83b7\u53d6\u5f53\u524d\u573a\u666f\u7684\u6d41\u7a0b\u76d1\u63a7\u9879\u6570\u636e\r\n                $(selector).html(\'\');    //\u521d\u59cb\u5316\u573a\u666f\r\n                for (let i = 0; i < base_list.length; i++) {\r\n                    //\u6dfb\u52a0\u4e00\u4e2adiv\u5bb9\u5668\uff0c\u5f62\u5982<div type="basic1"></div>\r\n                    $(selector).append(\'<div type=\\"basic\' + base_list[i].id + \'\\" style=\\"position: absolute;top:\' + base_list[i].y + \'px;left:\' + base_list[i].x + \'px;transform: scale(\' + base_list[i].scale + \')\\"></div>\');\r\n                    //\u8c03\u7528\u57fa\u672c\u76d1\u63a7\u9879\u7684\u6e32\u67d3\u65b9\u6cd5,\u7b2c\u4e00\u4e2a\u53c2\u6570\u5bf9\u5e94\u5bb9\u5668div\u7684type\r\n                    base_monitor_active(base_list[i].id, base_list[i].font_size, base_list[i].height, base_list[i].width,base_list[i].contents);\r\n                }\r\n                for (let i = 0; i < chart_list.length; i++) {\r\n                    //\u6dfb\u52a0\u4e00\u4e2adiv\u5bb9\u5668,\u5f62\u5982<div id="1_1"><div id="chart1_1"></div></div>\r\n                    $(selector).append(\'<div id=\\"\' + value + \'_\' + chart_list[i].order + \'\\" style=\\"position: absolute;background:beige;height:\' + chart_list[i].height + \'px;width:\' + chart_list[i].width + \'px;top:\' + chart_list[i].y + \'px;left:\' + chart_list[i].x + \'px;transform: scale(\' + chart_list[i].scale + \')\\"><div id=\\"chart\' + value + \'_\' + chart_list[i].order + \'\\" style=\\"background:beige;height:\' + chart_list[i].height + \'px;width:\' + chart_list[i].width + \'px\\"></div><input class="score_input" type="text" value="0"><div class="right_click"><span class="score">\u6253\u5206</span><span class="delete">\u5220\u9664\u76d1\u63a7\u9879</span></div></div>\');\r\n                    //\u8c03\u7528\u56fe\u6807\u76d1\u63a7\u9879\u7684\u6e32\u67d3\u65b9\u6cd5\uff0c\u6700\u540e\u4e00\u4e2a\u53c2\u6570\u5bf9\u5e94\u5bb9\u5668\u5916\u5c42div\u7684id\r\n                    show_chart_active(chart_list[i].id, chart_list[i].gather_params, chart_list[i].height, chart_list[i].width, value + \'_\' + chart_list[i].order);\r\n\r\n                }\r\n                for (let i = 0; i < job_list.length; i++) {\r\n                    let job_params = {\r\n                        \'id\': job_list[i].id,     //\u76d1\u63a7\u9879id\r\n                        \'width\': job_list[i].width,\r\n                        \'height\': job_list[i].height,\r\n                        \'status\': job_list[i].job_status,   //\u91c7\u96c6\u6d4b\u8bd5\u7684\u4f5c\u4e1a\u72b6\u6001\r\n                        \'contents\': job_list[i].contents    //\u76d1\u63a7\u9879\u7684\u663e\u793a\u5185\u5bb9\u53c2\u6570\r\n                    };\r\n                    //\u6dfb\u52a0\u4e00\u4e2adiv\u5bb9\u5668,\u5f62\u5982<div id="job1"></div></div>\r\n                    $(selector).append(\'<div type=\\"job\' + job_list[i].id + \'\\" id=\\"\' + value + \'_\' + job_list[i].order + \'\\" style=\\"position: absolute;top:\' + job_list[i].y + \'px;left:\' + job_list[i].x + \'px;transform: scale(\' + job_list[i].scale + \')\\"></div>\');\r\n                    //\u8c03\u7528\u4f5c\u4e1a\u76d1\u63a7\u9879\u7684\u6e32\u67d3\u65b9\u6cd5\uff0c\u53c2\u6570\u7684\u7b2c\u4e00\u6761\u503c\u5bf9\u5e94\u5bb9\u5668\u5916\u5c42div\u7684id\r\n                    job_monitor_active(job_params);\r\n                }\r\n                for (let i = 0; i < flow_list.length; i++) {\r\n\r\n                    let jion_id = [{\r\n                        "id": flow_list[i].jion_id\r\n                    }];\r\n                    //\u6dfb\u52a0\u4e00\u4e2adiv\u5bb9\u5668,\u5f62\u5982<div><div id="flow1_1"></div></div>\r\n                    $(selector).append(\'<div class=\\"flow_monitor\\" type=\\"\'+flow_list[i].id+\'\\" style=\\"position: absolute;top:\' + flow_list[i].y + \'px;left:\' + flow_list[i].x + \'px;transform: scale(\' + flow_list[i].scale + \')\\"><div type=\\"flow_monitor\' + value + \'_\' + flow_list[i].order + \'\\"></div></div>\');\r\n                    //\u8c03\u7528\u6d41\u7a0b\u76d1\u63a7\u9879\u7684\u6e32\u67d3\u65b9\u6cd5\uff0c\u7b2c\u4e00\u6761\u53c2\u6570\u5fc5\u987b\u4e3a[{}]\u683c\u5f0f\uff0c\u7528\u6765\u8c03v3\u63a5\u53e3\uff0c\u7b2c\u4e8c\u6761\u53c2\u6570\u5bf9\u5e94\u5bb9\u5668\u5185\u90e8div\u7684id\r\n                    flow_monitor(jion_id, value + \'_\' + flow_list[i].order);\r\n                    setTimeout(function () {\r\n                    axios({\r\n                        method: \'post\',\r\n                        url: \'')
        __M_writer(unicode(SITE_URL))
        __M_writer(u'monitor_item/node_state_by_item_id/\',\r\n                        data: {\r\n                            \'item_id\': flow_list[i].id\r\n                        }\r\n                    }).then(function (res) {\r\n\r\n                            var len =res.data.message.length\r\n                            for(var j=0;j<=len-1;j++){\r\n                                data_key=res.data.message[j].data_value\r\n                                if(data_key == \'1\'||data_key==\'4\'){\r\n                                    $(\'p:contains(\'+res.data.message[j].data_key+\')\').parent().siblings(\'.node-icon\').css(\'background\',\'#67c23a\');\r\n                                }else if(data_key == \'0\' || data_key == \'3\'){\r\n                                    $(\'p:contains(\'+res.data.message[j].data_key+\')\').parent().siblings(\'.node-icon\').css(\'background\',\'#f56c6c\')\r\n                                }else if (data_key == \'2\') {\r\n                                    $(\'p:contains(\'+res.data.message[j].data_key+\')\').parent().siblings(\'.node-icon\').css(\'background\',\'#f56c6c\')\r\n                                    $(\'p:contains(\'+res.data.message[j].data_key+\')\').parent().siblings(\'.node-icon\').children().css(\'position\',\'relative\')\r\n                                    $(\'p:contains(\'+res.data.message[j].data_key+\')\').parents().siblings(\'.node-icon\').children().html(\'<div class=\\"keepOn\\"><p>\u662f\u5426\u7ee7\u7eed</p><span class="keepOn_yes">\u662f</span><span class="keepOn_no">\u5426</span></div>\')\r\n                                }\r\n                            }\r\n                        }).catch(function (e) {\r\n                            vm.$message.error(\'\u83b7\u53d6\u6570\u636e\u5931\u8d25\uff01\');\r\n                        });\r\n                    },1000)\r\n\r\n\r\n\r\n                }\r\n            },\r\n        },\r\n        mounted() {\r\n            //const that = this\r\n            //\u8fd9\u91cc\u5f88\u5173\u952e\uff1b\u5927\u90e8\u5206\u535a\u5ba2\u90fd\u662f\u8fd9\u6837\u5199\u7684\uff0c\u5176\u5b9e\u4e5f\u6ca1\u6709\u6bdb\u75c5\uff0c\u53ea\u4e0d\u8fc7\u6709\u65f6\u5019\u4e0d\u8d77\u4f5c\u7528\uff1b\r\n            window.onresize = () => {\r\n                return (() => {\r\n                    window.imgHeight = document.documentElement.clientHeight;\r\n                    this.imgHeight = \'\' + window.imgHeight + \'px\';\r\n                })()\r\n            }\r\n\r\n        },\r\n        watch: {\r\n            imgHeight(val) {\r\n                if (!this.timer) {\r\n                    this.imgHeight = val;\r\n                    this.timer = true;\r\n                    let that = this;\r\n                    setTimeout(function () {\r\n                        // that.screenWidth = that.$store.state.canvasWidth\r\n                        console.log(that.imgHeight);\r\n                        that.timer = false;\r\n                    }, 400)\r\n                }\r\n            },\r\n        }\r\n    });\r\n    vm.get_scenes()\r\n    var interval = setInterval(function () {\r\n        vm.get_scenes();\r\n    },10000);\r\n    $(function () {\r\n        $(document).on("click", ".keepOn_yes", function (e) {\r\n            e.preventDefault();\r\n            var id=$(this).parents(\'.flow_monitor\').attr(\'type\');\r\n            var name=$(this).parent(".node-wrapper").find("p").content;\r\n            axios({\r\n                method: \'post\',\r\n                        url: \'')
        __M_writer(unicode(SITE_URL))
        __M_writer(u'monitor_item/resume_flow/\',\r\n                        data: {\r\n                            \'item_id\': id,\r\n                            \'name\':name\r\n                        }\r\n            }).then(function (res) {\r\n                console.log(res);\r\n            });\r\n            $(this).parent().hide();\r\n        });\r\n        $(document).on("click", ".keepOn_no", function (e) {\r\n            e.preventDefault();\r\n            $(this).parent().hide();\r\n        });\r\n        $(document).on("click", ".block", function (e) {\r\n            var elem = document.body;\r\n            if (elem.webkitRequestFullScreen) {\r\n                elem.webkitRequestFullScreen();\r\n            } else if (elem.mozRequestFullScreen) {\r\n                elem.mozRequestFullScreen();\r\n            } else if (elem.requestFullScreen) {\r\n                elem.requestFullscreen();\r\n            } else {\r\n                notice.notice_show("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u5168\u5c4fAPI\u6216\u5df2\u88ab\u7981\u7528", null, null, null, true, true);\r\n            }\r\n        });\r\n    });\r\n</script>\r\n\r\n\r\n<!--\u6682\u65f6\u7684css\u6837\u5f0f-->\r\n<style>\r\n    .el-carousel__item h3 {\r\n        color: #475669;\r\n        font-size: 14px;\r\n        opacity: 0.75;\r\n        line-height: 150px;\r\n        margin: 0;\r\n    }\r\n\r\n    .el-carousel__container {\r\n        background-image: url("/static/img/scene_content_bg.png");\r\n        background-size: 100% 100%;\r\n    }\r\n\r\n    .score_input {\r\n        font-size: 16px;\r\n        position: absolute;\r\n        background: rgba(255, 255, 255, 0.1);\r\n        top: -36px;\r\n        left: 0;\r\n        width: 50px;\r\n        height: 36px;\r\n        display: none;\r\n    }\r\n    .right_click {\r\n        position: absolute;\r\n        width: 100px;\r\n        display: none;\r\n    }\r\n\r\n    .right_click span {\r\n        width: 100px;\r\n        display: inline-block;\r\n        font-size: 16px;\r\n        line-height: 36px;\r\n    }\r\n    .keepOn{\r\n        position: absolute;\r\n        top: 32px;\r\n        right: 0;\r\n        width: 115px;\r\n        height: 60px;\r\n    }\r\n    .keepOn p{\r\n        margin-top: 5px;\r\n        line-height: 20px;\r\n        color: black;\r\n    }\r\n    .keepOn span{\r\n        width: 20%;\r\n        margin: 0 20px;\r\n        color: black;\r\n        background: #00baff;\r\n    }\r\n</style>\r\n</body>\r\n</html>')
        return ''
    finally:
        context.caller_stack._pop_frame()


"""
__M_BEGIN_METADATA
{"source_encoding": "utf-8", "line_map": {"16": 0, "23": 1, "24": 6, "25": 6, "26": 7, "27": 7, "28": 9, "29": 9, "30": 10, "31": 10, "32": 12, "33": 12, "34": 14, "35": 14, "36": 16, "37": 16, "38": 18, "39": 18, "40": 20, "41": 20, "42": 22, "43": 22, "44": 24, "45": 24, "46": 30, "47": 30, "48": 31, "49": 31, "50": 34, "51": 34, "52": 39, "53": 39, "54": 47, "55": 47, "56": 88, "57": 88, "58": 153, "59": 153, "60": 219, "61": 219, "67": 61}, "uri": "./scene/scenecarousel.html", "filename": "D:/py-workspace/LanhuSaas/framework/templates/scene/scenecarousel.html"}
__M_END_METADATA
"""
